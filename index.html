<html>
	<head>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
		<title>Geemail</title>
    <script>
    window.onload = function (){

	// structure

	  	var emailHeader = document.createElement("div");
	    emailHeader.id = "emailHeaderId";
	    emailHeader.innerHTML = "<img src=\"images/logo.svg\"/>";
	    document.body.appendChild(emailHeader);

	  	var rightWindow = document.createElement("div");
	  	rightWindow.id = "rightWindowId";
	  	document.body.appendChild(rightWindow);

	  	var inboxWrapper = document.createElement("div");
	    inboxWrapper.id = "inboxWrapperId";
	    rightWindow.appendChild(inboxWrapper);

	  	var emailWrapper = document.createElement("div");
	    emailWrapper.id = "col-6 emailWrapperId";
	    inboxWrapper.appendChild(emailWrapper);

	// render initial mail

  		function renderGeemails(data){
    	for (var i=0; i<geemails.length; i++){

		  	var emailLine = document.createElement("div");
		  	emailLine.className = "col-7 emailLineClass";
		  	emailLine.addEventListener("click", showMessage);
		  	emailWrapper.appendChild(emailLine);

		  	var carrotRight = document.createElement("div");
		  	carrotRight.className = "col-2 carrotClassRight";
		  	carrotRight.innerHTML = "<img src=\"images/right_carrot.svg\"/>";
		  	emailLine.appendChild(carrotRight);

		  	var carrotDown = document.createElement("div");
		  	carrotDown.className = "col-2 carrotClassDown";
		  	carrotDown.innerHTML = "<img src=\"images/down_carrot.svg\"/>";
		  	emailLine.appendChild(carrotDown);

		  	var senderLine = document.createElement("div");
		  	senderLine.className = "col-3 senderLineClass";
		  	senderLine.innerHTML = "From: " + data[i].sender;
		  	emailLine.appendChild(senderLine);

		  	var subjectLine = document.createElement("div");
		  	subjectLine.className = "col-4 subjectLineClass";
		  	subjectLine.innerHTML = "Subject: " + data[i].subject;
		  	emailLine.appendChild(subjectLine);

		  	var dateLine = document.createElement("div");
		  	dateLine.className = "col-5 dateLineClass";
		  	dateLine.innerHTML = "Date: " + data[i].date;
		  	emailLine.appendChild(dateLine);

		  	var bodyLine = document.createElement("div");
		  	bodyLine.className = "col-6 emailBodyContent";
		  	bodyLine.innerHTML = "Body:" + "<br>" + "<br>" + data[i].body;
		  	emailLine.appendChild(bodyLine);

		  	var line = document.createElement("hr");
		  	line.className = "hrClass";
		  	emailWrapper.appendChild(line);

    		}
  		}
  		renderGeemails(geemails);

    // set interval function

  		var newMail = setInterval(function(){ loadNewMail(); }, 2000);

  	// add new mail

  		function loadNewMail(){

  			var newMessageBlock = getNewMessage();

  			var emailLine = document.createElement("div");
		  	emailLine.className = "col-7 emailLineClass";
		  	emailLine.addEventListener("click", showMessage);
		  	emailWrapper.appendChild(emailLine);

		  	var carrotRight = document.createElement("div");
		  	carrotRight.className = "col-2 carrotClassRight";
		  	carrotRight.innerHTML = "<img src=\"images/right_carrot.svg\"/>";
		  	emailLine.appendChild(carrotRight);

		  	var carrotDown = document.createElement("div");
		  	carrotDown.className = "col-2 carrotClassDown";
		  	carrotDown.innerHTML = "<img src=\"images/down_carrot.svg\"/>";
		  	emailLine.appendChild(carrotDown);

		  	var senderLine = document.createElement("div");
		  	senderLine.className = "col-3 senderLineClass";
		  	senderLine.innerHTML = "From: " + newMessageBlock.sender;
		  	emailLine.appendChild(senderLine);

		  	var subjectLine = document.createElement("div");
		  	subjectLine.className = "col-4 subjectLineClass";
		  	subjectLine.innerHTML = "Subject: " + newMessageBlock.subject;
		  	emailLine.appendChild(subjectLine);

		  	var dateLine = document.createElement("div");
		  	dateLine.className = "col-5 dateLineClass";
		  	dateLine.innerHTML = "Date: " + newMessageBlock.date;
		  	emailLine.appendChild(dateLine);

		  	var bodyLine = document.createElement("div");
		  	bodyLine.className = "col-6 emailBodyContent";
		  	bodyLine.innerHTML = newMessageBlock.body;
		  	emailLine.appendChild(bodyLine);

		  	var line = document.createElement("hr");
		  	line.className = "hrClass";
		  	emailWrapper.appendChild(line);

	// count incoming mail

		  	var inboxCounter = geemails.length;

			var displayInboxCount = document.getElementsByTagName("button")[1];
			displayInboxCount.innerHTML = "Inbox: (" + inboxCounter + ")";

		  	geemails.push(getNewMessage());

  		}
  		loadNewMail(geemails);

  	// email footer

  		var emailFooter = document.createElement("div");
	    emailFooter.id = "emailFooterId";
	    rightWindow.appendChild(emailFooter);

  	// toggle body content

  		function showMessage(){

	    	var toggle = this.querySelectorAll(".emailBodyContent")[0];
	      	if(toggle.style.display === "none"){
	        toggle.style.display = "block";
	      	}else{
	        toggle.style.display = "none";
	      	}

	    	var toggleCarrot1 = this.querySelectorAll(".carrotClassRight")[0];
	      	if(toggleCarrot1.style.display === "block"){
	        toggleCarrot1.style.display = "none";
	      	}else{
	        toggleCarrot1.style.display = "block";
	      	}

	    	var toggleCarrot2 = this.querySelectorAll(".carrotClassDown")[0];
	      	if(toggleCarrot1.style.display === "none"){
	        toggleCarrot2.style.display = "block";
	      	}else{
	        toggleCarrot2.style.display = "none";
	      	}
	  	}
    };
 
    // reload page

    	function refreshInbox(){
		location.reload();
	}

    </script>
	</head>
	<body>
		<div id="sidenav">
			<button type="button" id="mainbutton" onclick="refreshInbox()">REFRESH</button>
			<hr>
  			<button type="button"></a>
		</div>
		<script src="js/mail-generator.js"></script>
	</body>
</html>