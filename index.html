<html>
	<head>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
		<title>Geemail</title>
    <script>
    window.onload = function (){

	  	var emailHeader = document.createElement("div");
	    emailHeader.id = "emailHeaderId";
	    emailHeader.innerHTML = "GEEMAIL";
	    document.body.appendChild(emailHeader);

	  	var rightWindow = document.createElement("div");
	  	rightWindow.id = "rightWindowId";
	  	document.body.appendChild(rightWindow);

	  	var inboxWrapper = document.createElement("div");
	    inboxWrapper.id = "inboxWrapperId";
	    rightWindow.appendChild(inboxWrapper);

	  	var emailWrapper = document.createElement("div");
	    emailWrapper.id = "col-6 emailWrapperId";
	    inboxWrapper.appendChild(emailWrapper);

  		function renderGeemails(data){
    	for (var i=0; i<geemails.length; i++){

		  	var emailLine = document.createElement("div");
		  	emailLine.className = "col-7 emailLineClass";
		  	emailLine.addEventListener("click", showMessage);
		  	emailWrapper.appendChild(emailLine);

		  	var carrotRight = document.createElement("div");
		  	carrotRight.className = "col-2 carrotClassRight";
		  	carrotRight.innerHTML = "<img src=\"images/right_carrot.svg\"/>";
		  	emailLine.appendChild(carrotRight);

		  	var carrotDown = document.createElement("div");
		  	carrotDown.className = "col-2 carrotClassDown";
		  	carrotDown.innerHTML = "<img src=\"images/down_carrot.svg\"/>";
		  	emailLine.appendChild(carrotDown);

		  	var senderLine = document.createElement("div");
		  	senderLine.className = "col-3 senderLineClass";
		  	senderLine.innerHTML = "From: " + data[i].sender;
		  	emailLine.appendChild(senderLine);

		  	var subjectLine = document.createElement("div");
		  	subjectLine.className = "col-4 subjectLineClass";
		  	subjectLine.innerHTML = "Subject: " + data[i].subject;
		  	emailLine.appendChild(subjectLine);

		  	var dateLine = document.createElement("div");
		  	dateLine.className = "col-5 dateLineClass";
		  	dateLine.innerHTML = "Date: " + data[i].date;
		  	emailLine.appendChild(dateLine);

		  	var bodyLine = document.createElement("div");
		  	bodyLine.className = "col-6 emailBodyContent";
		  	bodyLine.innerHTML = data[i].body;
		  	emailLine.appendChild(bodyLine);

		  	var line = document.createElement("hr");
		  	line.className = "hrClass";
		  	emailWrapper.appendChild(line);
    		}
  		}
  		renderGeemails(geemails);

     // set interval function

  		var newMail = setInterval(function(){ loadNewMail(); }, 2000);
  		var omega = getNewMessage();
  		var newArr = [];
  		console.log(newArr);
  		// geemails.push(getNewMessage);

  		function loadNewMail(){
  			// for (var i = 0; i < 100; i++){
  			var emailLine = document.createElement("div");
		  	emailLine.className = "col-7 emailLineClass";
		  	emailLine.addEventListener("click", showMessage);
		  	emailWrapper.appendChild(emailLine);

		  	var carrotRight = document.createElement("div");
		  	carrotRight.className = "col-2 carrotClassRight";
		  	carrotRight.innerHTML = "<img src=\"images/right_carrot.svg\"/>";
		  	emailLine.appendChild(carrotRight);

		  	var carrotDown = document.createElement("div");
		  	carrotDown.className = "col-2 carrotClassDown";
		  	carrotDown.innerHTML = "<img src=\"images/down_carrot.svg\"/>";
		  	emailLine.appendChild(carrotDown);

		  	var senderLine = document.createElement("div");
		  	senderLine.className = "col-3 senderLineClass";
		  	senderLine.innerHTML = "From: " + omega.sender;
		  	emailLine.appendChild(senderLine);

		  	var subjectLine = document.createElement("div");
		  	subjectLine.className = "col-4 subjectLineClass";
		  	subjectLine.innerHTML = "Subject: " + omega.subject;
		  	emailLine.appendChild(subjectLine);

		  	var dateLine = document.createElement("div");
		  	dateLine.className = "col-5 dateLineClass";
		  	dateLine.innerHTML = "Date: " + omega.date;
		  	emailLine.appendChild(dateLine);

		  	var bodyLine = document.createElement("div");
		  	bodyLine.className = "col-6 emailBodyContent";
		  	bodyLine.innerHTML = omega.body;
		  	emailLine.appendChild(bodyLine);

		  	var line = document.createElement("hr");
		  	line.className = "hrClass";
		  	emailWrapper.appendChild(line);
		// }

  		}
  		loadNewMail(getNewMessage);

  // 		function getNewMail(data1) {
  //   		setInterval(getNewMessage(), 2000);
		// }
		// getNewMail(getNewMessage);

  	// toggle body content

  		function showMessage(){

	    	var toggle = this.querySelectorAll(".emailBodyContent")[0];
	      	if(toggle.style.display === "none"){
	        toggle.style.display = "block";
	      	}else{
	        toggle.style.display = "none";
	      	}

	    	var toggleCarrot1 = this.querySelectorAll(".carrotClassRight")[0];
	      	if(toggleCarrot1.style.display === "block"){
	        toggleCarrot1.style.display = "none";
	      	}else{
	        toggleCarrot1.style.display = "block";
	      	}

	    	var toggleCarrot2 = this.querySelectorAll(".carrotClassDown")[0];
	      	if(toggleCarrot1.style.display === "none"){
	        toggleCarrot2.style.display = "block";
	      	}else{
	        toggleCarrot2.style.display = "none";
	      	}
	  	}

	// inbox counter

		var inboxCounter = [];
		inboxCounter.push(geemails.length);
		// console.log(inboxCounter);

		var displayInboxCount = document.getElementsByTagName("a")[0];
		displayInboxCount.innerHTML = "Inbox: (" + inboxCounter + ")";

	    var emailFooter = document.createElement("div");
	    emailFooter.id = "emailFooterId";
	    rightWindow.appendChild(emailFooter);

        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

    };
    </script>
	</head>
	<body>
		<div class="sidenav">
			<button type="button">GET NEW MAIL</button>
			<hr>
  			<a href="#about">About</a>
  			<a href="#services">Refresh Inbox</a>
  			<a href="#clients">Filter Spam</a>
  			<a href="#contact">Btn 4</a>
  			<hr>
		</div>
		<!-- <div class="container" id="main">
			Build Me!
		</div> -->
		<script src="js/mail-generator.js"></script>
	</body>
</html>